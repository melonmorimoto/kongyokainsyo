<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚³ãƒ³ã‚®ãƒ§æ•™ä¼š ç¤¼æ‹ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background-color: #ffdddd;
      color: #222;
      text-align: center;
      padding: 2em;
    }
    .card {
      background: white;
      border-radius: 1em;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      padding: 2em;
      max-width: 400px;
      margin: 0 auto;
    }
    .stamps {
      font-size: 2em;
      letter-spacing: 1em;
      margin: 1em 0;
    }
    button {
      font-size: 1.2em;
      padding: 0.5em 1em;
      border: none;
      background-color: crimson;
      color: white;
      border-radius: 0.5em;
      cursor: pointer;
    }
    .reward {
      margin-top: 1em;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1 id="username">ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰</h1>
    <div class="stamps" id="stamps">â¬œâ¬œâ¬œ</div>
    <button onclick="addStamp()">ç¤¼æ‹ã«å‚åŠ ã™ã‚‹</button>
    <div class="reward" id="rewardMsg"></div>
  </div>

  <script>
    // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰åå‰ã‚’å–å¾—
    const params = new URLSearchParams(location.search);
    const name = params.get('name') || 'åç„¡ã—';
    document.getElementById('username').innerText = `${name} ã®ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰`;

    // ä¿å­˜ç”¨ã‚­ãƒ¼
    const storageKey = `kongyo_stamp_${name}`;
    let stampCount = parseInt(localStorage.getItem(storageKey)) || 0;

    function renderStamps() {
      const stamps = ["â¬œ", "â¬œ", "â¬œ"];
      for (let i = 0; i < stampCount; i++) {
        stamps[i] = "âœ…";
      }
      document.getElementById("stamps").innerText = stamps.join("");
      document.getElementById("rewardMsg").innerText =
        stampCount >= 3 ? "ğŸ‰ ãŠã‚ã§ã¨ã†ï¼50ãƒãƒ­ãƒ«GETï¼" : "";
    }

    function addStamp() {
      if (stampCount < 3) {
        stampCount++;
        localStorage.setItem(storageKey, stampCount);
        renderStamps();
      } else {
        alert("ã‚‚ã†ãƒãƒ­ãƒ«ã¯ã‚‚ã‚‰ãˆã‚‹çŠ¶æ…‹ã§ã™ï¼");
      }
    }

    renderStamps();
  </script>
</body>
</html>
